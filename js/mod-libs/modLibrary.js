function goBack(){let e=localStorage.getItem("lastPage");e?window.location.href=e:alert("No previous page found!")}function displayMods(){indexedDB.open("ModLibraryDB",2).onsuccess=function(e){let o=e.target.result.transaction("modIcons","readonly").objectStore("modIcons").getAll();o.onsuccess=function(){let e=o.result,t=document.getElementById("library");t.innerHTML="";let n=document.getElementById("mods-found");if(0===e.length)return t.innerHTML='<div id="lib_text-info">Open the version to load progress.</div>',void(n.innerText="No mods found!");e.forEach((e=>{let o=document.createElement("div");o.classList.add("mod-card"),o.id=e.name;let n=document.createElement("div");n.classList.add("special-bg"),n.style.backgroundImage=`url(${e.background})`;let d=e.lastPlayed&&!isNaN(e.lastPlayed)?getTimeAgo(Number(e.lastPlayed)):"Never played";o.innerHTML=`\n                    <img src="${e.icon}" class="mod-icon">\n                    <div class="mod-info">\n                        <h3>${e.name}</h3>\n                        <p>Version: ${e.version}</p>\n                        <p>By: ${e.developer}</p>\n                        <br>\n                        <div class="played-date">Last played: ${d}</div>\n                    </div>\n                    <div class="delete-button" onclick="deleteMod('${e.name}')">\n                    <svg class="icn-svg"><use xlink:href="#ic-trash"></use></svg></div>\n                `,o.appendChild(n),t.appendChild(o),countMods()}))}}}function deleteMod(e){indexedDB.open("ModLibraryDB",2).onsuccess=function(o){o.target.result.transaction("modIcons","readwrite").objectStore("modIcons").delete(e),document.getElementById(e).remove(),countMods()}}function countMods(){let e=document.querySelectorAll(".mod-card").length,o=document.getElementById("mods-found");o&&(o.innerHTML=`Mods found: ${e}`)}function getTimeAgo(e){if(!e||isNaN(e))return"Never played";let o=Date.now()-e,t=Math.floor(o/1e3),n=Math.floor(t/60),d=Math.floor(n/60),a=Math.floor(d/24),s=Math.floor(a/7),l=Math.floor(a/30),r=Math.floor(a/365);return r>0?1===r?"1 year ago":`${r} years ago`:l>0?1===l?"1 month ago":`${l} months ago`:s>0?1===s?"1 week ago":`${s} weeks ago`:a>0?1===a?"1 day ago":`${a} days ago`:d>0?1===d?"1 hour ago":`${d} hours ago`:n>0?1===n?"1 minute ago":`${n} minutes ago`:"Just now"}document.addEventListener("DOMContentLoaded",(()=>{document.body.classList.add("page-zoom"),"true"===localStorage.getItem("param-dark")?(document.body.classList.add("darkmode"),console.log("Dark mode enabled")):console.log("Dark mode disabled"),document.body.classList.add("page-zoom")}));